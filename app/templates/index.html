{% extends "base.html" %}
{% load crispy_forms_tags %}
{% load static %}
{% block content %}	

<!-- start banner -->
<section id="home">
	<div class="container">
		<div class="row toptitle">
			<div class="col-md-offset-2 col-md-8">
				<div class="homeContent">
					<h1>DUBLINK BUS</h1>
					<h1 class="secondaryHeading">Get there on time</h1>
					<div class="element">
						{% if user.is_authenticated %}
	                    	<div class="sub-element">Hello, {{user.username}}</div>
	                    	<div class="sub-element">Welcome back</div>
	                    {% else %}
	                    	<div class="sub-element"><a href="{% url 'register' %}">Sign up</a> or <a href="{% url 'login' %}">log in</a> to use great extra features</div>
	                    {% endif %}
	                </div>
	            </div>
			</div>
		</div>
	</div>
</section>
<!-- end banner -->

<div class="upperContainer">
	<div class="row">
		
		<div id="mapSectionContainer" class="col-sm-12 col-md-6">
			<h1>SEE THE STOPS</h1>
			<div class="mapForm">
				<input type="text" name="" id="stoptextbox" placeholder="Search by stop name here (Need to add serach by stop ID too)..." class="maptextbox"/>
			</div>
			<div class="mapContainer">
				<div id="map"></div>
			</div>
		</div>

		<div id="planRouteSectionContainter" class="col-sm-12 col-md-6">
			<h1> PLAN A TRIP </h1>
			<div class="routePlanForm">
				<input id="startLocation" placeholder="Enter start location" type="text" class="stoptextbox"/>
				<input id="endLocation" placeholder="Enter end location" type="text" class="stoptextbox"/>
				<div id="daySelect">
				</div>
				<div class="timeSelect">
					<!-- <input class="timeBox" type="time" value="13:30"/> -->
					<input id="time" class="timeBox" type="time" value="13:30"/>
				</div>
				{% if user.is_authenticated %}
					<h4 id="locationsHeader"> Quick Access Locations </h4>
					<ul id="favAddressSection">
					</ul>
					<div id="hiddenSection">
						<form class="addFavAddress" onsubmit="return false"> 
							<input id="addName" class="favAddressInput" type="text" name="" placeholder="Enter name for location" maxlength = "10"> 
							<input id="addAddress" class="favAddressInput" type="text" name="" placeholder="Enter location address"> 
							<button class="routePlanButton" onClick=addFavAddress()> Submit </button> 
						</form>
					</div>	
		        {% else %}
			          	<p><a href="{% url 'login' %}">Log in</a> or <a href="{% url 'register' %}"> register </a> to save favourite locations </p>
		        {% endif %}
		        <button class="routePlanButton" id="planRouteSubmit">Search</button>
			</div>
			<div class="RoutePlanResults">
				<p id="results1"></p>
				<p id="results2"></p>
			<div>
		</div>
	<!--Must have missed a few div tags somewhere, keep these in -->
	</div>
	</div>
	</div>
	</div>

		
	</div>
</div>
	
<!-- <div>
	<p id="journey_info"></p>
</div> -->

<div class="lowerContainer">
	<div class="row">
		<div class="col-lg-12 col-md-12 col-sm-12">
			<div id="takeatrip" class="takeTripSection">
				<h1 class="tripTitle"> TAKE A TRIP </h1>
				<div id="tripmessage" class="message">
					<p>Oh No! Looks like you don't have any trips planned. To plan a trip use the route prediction tool above and select 'TAKE A TRIP' to get live updates on your journey and see additional journey information such as the environmental impact of your journey.</p>
					<p>Please Note: Location tracking must be enabled for this </p>
				</div>
				<div class="container">
					<div class="row">
						<div class="col-sm-12 col-md-6">
							<div id="selectedTrip">
								<h3>Upcoming Stops</h4>
								<div id="upcomingStops">
								</div>
							</div>
						</div>
						<div class="col-sm-12 col-md-6">
							<div id="tripInfo">
								<h3>Trip Information</h4>
								<p>Estimated Arrival Time: <span id="estimatedArrival" ></span> </p>
								<p>Time Until Arrival: <span id="timeLeft" ></span> </p>
								<p>Stops Until Destination: <span id="stopsLeft" ></span> </p>
								<p>Distance to Destination: <span id="distanceLeft" ></span> </p>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	
	<div id="startJourney">
		<button id="start">Start Journey</button>
	</div>
	<div id="endJourney">
		<button id="end">End Journey</button>
	</div>

</div>


<!-- <div style="margin-top:20px" id="getRouteContainer">
	<form id="route_get_form">
		Origin Address: <input value="Rathmines Road" style="display:block;margin:20;" id="addr1" type="text">
		Destination Address: <input value="Grafton Street" style="display:block;margin:20;" id="addr2" type="text">
		<br>
		<button type="submit" class="btn btn-primary" id="rget_btn">Get Route</button>
	</form>
</div> -->



<!-- Adding Axios -->
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<!--Below passing current user, used for the adding of favourite stops/Addresses-->
<script type="text/javascript">var context = {current_user: '{{current_user}}'};</script>
<!--Geolocation script -->
<script type="text/javascript" src="{% static 'js/geolocation.js' %}"></script>
<!-- Library to get accurate date and times for route planning -->
<script type="text/javascript" src="{% static 'js/moment.min.js' %}"></script>
<!--Map related scripts-->
<script type="text/javascript" src="{% static 'js/mapStyle.js' %}"></script>
<script type="text/javascript" src="{% static 'js/route_predict.js' %}"></script>
<script type="text/javascript" src="{% static 'js/get_route.js' %}"></script>
<script type="text/javascript" src="{% static 'js/static_stops.js' %}"></script>
<script type="text/javascript" src="{% static 'js/distinct_lines.js' %}"></script>
<script type="text/javascript" src="{% static 'js/map.js' %}"></script>
<script type="text/javascript" src="{% static 'js/initialize.js' %}"></script>
<!--Route prediction scripts-->
<script type="text/javascript" src="{% static 'js/route_predict.js' %}"></script>
<script type="text/javascript" src="{% static 'js/get_route.js' %}"></script>
<!-- Version of map script with key commented out while styling due to many refreshes -->
<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBTqQ5XI6Z3N5j26PNXbFKUxUFfq8dnGV8&libraries=places&callback=initialize"></script>
<script type="text/javascript" src="{% static 'js/mapcluster.js' %}"></script>
<!--Favourite Address script -->
<script type="text/javascript" src="{% static 'js/favouriteAddress.js' %}"></script>
<!-- <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBMnTVsjzHYZLzjrQxikSY6UiXOBCzmOXw&libraries=places&callback=initialize"></script> -->
<!-- <script async defer src="https://maps.googleapis.com/maps/api/js?key={{ key }}&libraries=places&callback=initialize"></script> -->
<script type="text/javascript" src="{% static 'js/mapcluster.js' %}"></script>
<!--Jquery used for autocomplete search bar -->
<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script type="text/javascript" src="{% static 'js/searchBar.js' %}"></script>
<!--Fetch weather data, last as will likely be used last--> 
<script type="text/javascript" src="{% static 'js/weather.js' %}"></script>


{% endblock content %}


